you have to modify the hostname part and also add some new features.

# Hostname
Ubuntu 24.04 and Rocky Linux 9 server with public IP.  
hostname should be enter the fully qualified domain name like "server-01.barrzen.com" and also resolve externally as "server-01.barrzen.com".  
Give me clear step-by-step instructions to:  
1. Update /etc/hosts for both IPv4 and IPv6 in Rocky-Linux/Ubuntu format so that the hostname works locally and externally.  
2. Set the hostname properly so that `hostname` shows "server-01" and `hostname -f` shows "server-01.barrzen.com".  
4. Make the setup fail-safe so that even if Cloudflare DNS is down, the hostname still resolves locally for Kubernetes and k3s.  

# New features
All features must work on Ubuntu 24.04 and Rocky Linux 9 server
1. ask for k3s installation
2. give option to choose between server and agent
3. Fix the swap issue
4. open firewall ports for k3s (beware that ubuntu and rocky have different application like ufw and firewall-cmd and they can be not installed 
or even can be inactive. best is that find the active one and use it if only you think this is better otherwise use best approches.)
5. install k3s
6. There can be some specific consideration for Rocky Linux 9 like cgroup issue.
